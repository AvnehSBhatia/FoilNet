# FoilNet - Airfoil Optimization Tool

## This is a Python tool for optimizing airfoil shapes using genetic algorithms. It takes NACA airfoil codes and optimizes them for better lift-to-drag ratios.

## Any contributions are appreciated!

## What it does

The tool uses a neural network trained on NACA airfoil data to convert between different coordinate formats, then applies genetic algorithms to find better airfoil shapes. It evaluates performance using NeuralFoil for aerodynamic calculations.

## Four-Stage Optimization

1. Stage 1: Peak L/D optimization
2. Stage 2: Peak CL at peak L/D optimization  
3. Stage 3: Average CL over ±4° range optimization
4. Stage 4: Average L/D over ±4° range optimization

Each stage preserves previous achievements within 2% tolerance.

## Requirements

- Python 3.7+
- PyTorch
- NumPy
- Matplotlib
- NeuralFoil (auto-installs if missing)
- OpenCV
- PIL
- tqdm
- scipy

## Installation

1. Clone this repository
2. Install dependencies: `pip install -r requirements.txt`
3. Run the trainer first: `python naca_trainer.py`
4. Then run the optimizer: `python optimize.py`

## Usage

### Basic optimization

```bash
python optimize.py
```

This will prompt you for:
- Target lift (optional)
- Population size
- Number of generations
- Early stopping parameters

### Direct genetic algorithm

```bash
python genetic_naca_optimizer.py
```

This runs the genetic algorithm directly with more control over parameters.

## Files

- `optimize.py` - Main optimization script with comparison plots
- `genetic_naca_optimizer.py` - Genetic algorithm implementation
- `naca_trainer.py` - Neural network training for coordinate conversion
- `af512_to_xy_model.pth` - Trained model (generated by trainer)

## Cool tech
- `AF512` - This custom format makes it easier for the genetic algorithm to learn, as it provides a reduction layer between the foil and direct XY coordinates. It also allows for noise filtering through the model.
- `Noising` - Noise is added to the training data, and into the optimization steps as well, and it has been found to improve performance
-`Less Kids!` - Another affect of the noising is that you can run an optimization with only 5 starting profiles for about 350 generations, without sacrificing quality!

## Output

The tool generates:
- DAT files with optimized airfoil coordinates
- DXF files for CAD import
- Comparison plots showing before/after performance
- Optimization videos showing the evolution process

## Notes

- The neural network needs to be trained first before optimization (unless you already have it from the repo)
- Flight parameters are configurable (wingspan, chord, airspeed)
- Early stopping prevents unnecessary computation
- Results include both peak L/D and L/D vs Angle of Attack (alpha)

## Limitations

- Works best with thickness ranges 8-16%
- Genetic algorithm may get stuck in local optimas

## Acknowledgments
- I would like to Acknowledge Peter D. Sharpe in his work of AeroSandbox and NeuralFoil, both of which are core components in this repository!

## License

This is a research tool. Use at your own risk for any applications.

## Flight Conditions

- Default Wingspan: 6.0 ft
- Default Chord: 0.8 ft
- Default Airspeed: 35.0 mph

These values can be adjusted in the `optimize.py` file to suit different scenarios.
